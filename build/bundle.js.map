{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/main.ts","webpack:///./js/view/field2D.ts","webpack:///external \"paper\"","webpack:///./js/controllers/controller.ts","webpack:///./js/sim/game/gameSim.ts","webpack:///./js/sim/game/field.ts","webpack:///./js/sim/game/gamePlayer.ts","webpack:///./js/sim/game/engine.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","resourcesToInit","init","e","resize","engine","start","onKeyEvent","controller","type","keyCode","field2D","document","documentElement","clientWidth","clientHeight","canvas","querySelector","Controller","Field2D","game","GameSim","Engine","updateField","field","left","active","player","moveLeft","right","moveRight","up","moveUp","down","moveDown","update","addEventListener","once","loadAssets","window","_resourcesToLoad","this","initDraw","paper","setup","drawField","drawPlayers","updatePlayer","w","h","undefined","_fieldScale","_fieldImg","scale","bounds","topLeft","_playerScale","_playerImg","Point","ratio","_baseFieldH","_baseFieldW","oldPlayerW","width","_pixelsPerYardX","_pixelsPerYardY","height","newPlayerW","fieldEvent","Event","fieldLayer","Layer","project","addLayer","importSVG","item","dispatchEvent","playersEvent","playersLayer","Path","Circle","center","radius","addChild","fillColor","Color","colorMain","x","y","fillPlayerColor","child","strokeColor","colorSec","children","map","ButtonInput","handleInput","Field","friction","GamePlayer","_gridW","_gridH","_friction","vx","vy","collideObject","dt","onTick","render","_elapsed","_updated","handleTick","timeStamp","tick","_dt","_onTick","_render","_time","performance","now","_animationFrameRequest","requestAnimationFrame","stop","cancelAnimationFrame","console","log"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/build\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import { Field2D } from \"./view/field2D\";\r\nimport { Controller } from \"./controllers/controller\";\r\nimport { GameSim } from \"./sim/game/gameSim\";\r\nimport { Engine } from \"./sim/game/engine\";\r\n\r\n// initialize state variables\r\nlet resourcesToInit = 2;\r\n\r\n// initialize functions\r\nlet init = function(e : Event) {\r\n  resourcesToInit--;\r\n  if(resourcesToInit > 0) { return; }\r\n\r\n  resize(e);\r\n  engine.start();\r\n};\r\n\r\nlet onKeyEvent = function(e : KeyboardEvent) {\r\n  controller.onKeyEvent(e.type, e.keyCode);\r\n};\r\n\r\nlet resize = function(e : Event) {\r\n  field2D.resize(document.documentElement.clientWidth - 32, \r\n    document.documentElement.clientHeight - 32);\r\n};\r\n\r\nlet render = function() {\r\n  field2D.updateField(game.field);\r\n};\r\n\r\nlet update = function() {\r\n  if(controller.left.active) {\r\n    game.field.player.moveLeft();\r\n  }\r\n\r\n  if(controller.right.active) {\r\n    game.field.player.moveRight();\r\n  }\r\n\r\n  if(controller.up.active) {\r\n    game.field.player.moveUp();\r\n  }\r\n\r\n  if(controller.down.active) {\r\n    game.field.player.moveDown();\r\n  }\r\n\r\n  game.update();\r\n};\r\n\r\n// initialize game modules\r\nlet canvas = document.querySelector(\"canvas\");\r\nlet controller = new Controller(); \r\nlet field2D : Field2D = new Field2D(canvas);\r\nlet game = new GameSim();\r\nlet engine = new Engine(1000 / 30, render, update);\r\n\r\n// start the engine when the tilesheet is loaded\r\nfield2D.canvas.addEventListener(\"field-loaded\", init, { once: true });\r\nfield2D.canvas.addEventListener(\"players-loaded\", init, { once: true });\r\nfield2D.loadAssets();\r\n\r\nwindow.addEventListener(\"resize\", resize);\r\nwindow.addEventListener(\"keydown\", onKeyEvent);  \r\nwindow.addEventListener(\"keyup\", onKeyEvent);  \r\n\r\n","import { Item, Point, Layer, Path, Color  } from \"paper\"\r\nimport { Field } from \"../sim/game/field\"\r\nimport { GamePlayer } from \"../sim/game/gamePlayer\"\r\n\r\nexport class Field2D {\r\n  public canvas : HTMLCanvasElement;\r\n\r\n  private _resourcesToLoad : number = 2;\r\n  private _pixelsPerYardX : number;\r\n  private _pixelsPerYardY : number;\r\n  private _fieldScale : number;\r\n  private _fieldImg : Item;\r\n  private _baseFieldW : number;\r\n  private _baseFieldH : number;\r\n  private _playerScale : number;\r\n  private _playerImg : Item;\r\n\r\n  constructor(canvas : HTMLCanvasElement) {\r\n    this.canvas = canvas;\r\n\r\n    // these lines must be after initDraw is declared, even though it makes organization worse\r\n    this.canvas.addEventListener(\"field-loaded\", this.initDraw, { once: true });\r\n    this.canvas.addEventListener(\"players-loaded\", this.initDraw, { once: true });\r\n  }\r\n\r\n  public loadAssets() : void {\r\n    paper.setup(this.canvas);\r\n\r\n    this.drawField();\r\n    this.drawPlayers();\r\n  }\r\n\r\n  public updateField(field : Field) {\r\n    // draw the player (eventually this will be drawing 22 players)\r\n    this.updatePlayer(field.player);\r\n  }\r\n\r\n  public resize(w : number, h : number) {\r\n    // reverse the existing scales\r\n    if(this._fieldScale !== undefined) {\r\n      this._fieldImg.scale(1 / this._fieldScale, this._fieldImg.bounds.topLeft);\r\n    }\r\n    if(this._playerScale !== undefined) {\r\n      this._playerImg.scale(1 / this._playerScale, new Point(0, 0));\r\n    }\r\n\r\n    let ratio = this._baseFieldH / this._baseFieldW;\r\n    this._fieldScale = h / w > ratio ? w / this._baseFieldW : h / this._baseFieldH;\r\n    \r\n    this._fieldImg.scale(this._fieldScale, this._fieldImg.bounds.topLeft);\r\n\r\n    // scale player to be 3 yards wide\r\n    let oldPlayerW = this._playerImg.bounds.width;\r\n    this._pixelsPerYardX = this._fieldImg.bounds.width / 120.9;\r\n    this._pixelsPerYardY = this._fieldImg.bounds.height / 54.1;\r\n    let newPlayerW = this._pixelsPerYardX * 3;\r\n    this._playerScale = newPlayerW / oldPlayerW;\r\n    this._playerImg.scale(this._playerScale, new Point(0, 0));\r\n  }\r\n\r\n  // I believe the way paper.js works means I only have to render here (not every frame)\r\n  private initDraw(e : Event) {\r\n    this._resourcesToLoad--;\r\n    if(this._resourcesToLoad > 0) { return; }\r\n\r\n    // doesn't do anything useful right now but keeping this set up just in case\r\n  }\r\n  \r\n  private drawField() {\r\n    let fieldEvent = new Event(\"field-loaded\");\r\n    let fieldLayer = new Layer();\r\n    paper.project.addLayer(fieldLayer);\r\n    paper.project.importSVG(\"../../media/field2D.svg\", (item : Item) => {\r\n      this._fieldImg = item;\r\n      this._baseFieldW = this._fieldImg.bounds.width;\r\n      this._baseFieldH = this._fieldImg.bounds.height;\r\n      this.canvas.dispatchEvent(fieldEvent);\r\n    });\r\n  }\r\n\r\n  private drawPlayers() {\r\n    let playersEvent = new Event(\"players-loaded\");\r\n    let playersLayer = new Layer();\r\n    paper.project.addLayer(playersLayer);\r\n\r\n    // method 1 - jersey SVG (not working right now)\r\n    // paper.project.importSVG(\"../../media/jersey2.svg\", (item : paper.Item) => {\r\n    //   this._playerImg = item;\r\n    //   this.canvas.dispatchEvent(playersEvent);\r\n    // });\r\n\r\n    // method 2 - just a circle\r\n    this._playerImg = new Path.Circle({\r\n      center: [0, 0],\r\n      radius: 3\r\n    });\r\n    playersLayer.addChild(this._playerImg);\r\n    this.canvas.dispatchEvent(playersEvent);\r\n  }\r\n\r\n  private updatePlayer(player : GamePlayer) {\r\n    // should change things around so that this line isn't redundant with the identical one in fillPlayerColor()\r\n    //this._playerImg.children.map((child : paper.Item) => { this.fillPlayerColor(player, child); });\r\n\r\n    this._playerImg.fillColor = new Color(player.colorMain); // this line should be moved to initialization code\r\n    this._playerImg.bounds.x = player.x * this._pixelsPerYardX;\r\n    this._playerImg.bounds.y = player.y * this._pixelsPerYardY;\r\n\r\n    //let x = _playerImg.bounds.x;\r\n    //let y = _playerImg.bounds.y;\r\n    //console.log({x, y});\r\n  }\r\n\r\n  private fillPlayerColor(player : GamePlayer, child : Item) {\r\n    child.fillColor = new Color(player.colorMain);\r\n    child.strokeColor = new Color(player.colorSec);\r\n    if(typeof child.children !== \"undefined\") {\r\n      child.children.map((child) => { this.fillPlayerColor(player, child); });\r\n    }\r\n  }\r\n}\r\n","module.exports = paper;","export class Controller {\r\n\r\n  public down : ButtonInput = new ButtonInput();\r\n  public left : ButtonInput = new ButtonInput();\r\n  public right : ButtonInput = new ButtonInput();\r\n  public up : ButtonInput = new ButtonInput();\r\n\r\n  constructor() { }\r\n\r\n  public onKeyEvent(type : string, keyCode : number) {\r\n    let down = type === \"keydown\";\r\n    switch(keyCode) {\r\n      case 37:\r\n        this.left.handleInput(down);\r\n        break;\r\n      case 38:\r\n        this.up.handleInput(down);\r\n        break;\r\n      case 39:\r\n        this.right.handleInput(down);\r\n        break;  \r\n      case 40:\r\n        this.down.handleInput(down);\r\n    }\r\n  }\r\n}\r\n\r\nclass ButtonInput {\r\n  \r\n  public active : boolean = false;\r\n  public down : boolean = false;\r\n\r\n  constructor() { }\r\n\r\n  public handleInput(down : boolean) {\r\n    if(this.down != down) {\r\n      this.active = down;\r\n    }\r\n    this.down = down;\r\n  }\r\n}\r\n\r\n","import { Field } from \"./field\";\r\n\r\nexport class GameSim {\r\n  public field : Field = new Field();\r\n  \r\n  public update() {\r\n    this.field.update();\r\n  }\r\n}\r\n\r\n","import { GamePlayer } from \"./gamePlayer\"\r\n\r\nexport class Field {\r\n\r\n  public player : GamePlayer = new GamePlayer();\r\n\r\n  private _friction : number;\r\n  private _gridW : number = 120;\r\n  private _gridH : number = 54;\r\n\r\n  constructor(friction : number = 0.9) {\r\n    this._friction = friction;\r\n  }\r\n\r\n  public update() {\r\n    this.player.update();\r\n\r\n    this.player.vx *= this._friction;\r\n    this.player.vy *= this._friction;\r\n\r\n    this.collideObject(this.player);\r\n  }\r\n\r\n  private collideObject(object : GamePlayer) {\r\n    if(object.x < 0) {\r\n      object.x = 0;\r\n      object.vx = 0;\r\n    } else if(object.x > this._gridW) {\r\n      object.x = this._gridW;\r\n      object.vx = 0;\r\n    }\r\n\r\n    if(object.y < 0) {\r\n      object.y = 0;\r\n      object.vy = 0;\r\n    } else if(object.y > this._gridH) {\r\n      object.y = this._gridH;\r\n      object.vy = 0;\r\n    }\r\n  }\r\n}","export class GamePlayer {\r\n\r\n  public colorMain : string = \"#ff0000\"; // move to Player\r\n  public colorSec : string = \"rgba(100, 100, 100)\"; // move to Player\r\n  public x : number = 15;\r\n  public y : number = 25;\r\n  public vx : number = 0;\r\n  public vy : number = 0;\r\n  \r\n  constructor() { }\r\n\r\n  public moveLeft() {\r\n    this.vx -= 0.1;\r\n  }\r\n\r\n  public moveRight() {\r\n    this.vx += 0.1;\r\n  }\r\n\r\n  public moveUp() {\r\n    this.vy -= 0.1;\r\n  }\r\n\r\n  public moveDown() {\r\n    this.vy += 0.1;\r\n  }\r\n\r\n  public update() {\r\n    this.x += this.vx;\r\n    this.y += this.vy;\r\n  }\r\n}","export class Engine {\r\n  \r\n  private _elapsed : number = 0;\r\n  private _animationFrameRequest : number;\r\n  private _time : number;\r\n  private _dt : number;\r\n  private _updated : boolean = false;\r\n  private _onTick : Function;\r\n  private _render : Function;\r\n\r\n  constructor(dt : number, onTick : Function, render : Function) {\r\n    this._dt = dt;\r\n    this._onTick = onTick;\r\n    this._render = render;\r\n  }\r\n\r\n  public handleTick = (timeStamp : number) => {\r\n    this.tick(timeStamp);\r\n  }\r\n\r\n  public start() {\r\n    this._elapsed = this._dt;\r\n    this._time = window.performance.now();\r\n    this._animationFrameRequest = window.requestAnimationFrame(this.handleTick);\r\n  }\r\n\r\n  public stop() {\r\n    window.cancelAnimationFrame(this._animationFrameRequest); \r\n  }\r\n\r\n  private tick(timeStamp : number) {\r\n    this._elapsed += timeStamp - this._time;\r\n    this._time = timeStamp;\r\n\r\n    // roll back if 3 or more frames behind\r\n    if(this._elapsed >= this._dt * 3) {\r\n      console.log(\"rolling back frames...\");\r\n      this._elapsed = this._dt;\r\n    }\r\n\r\n    // run all the accumulated ticks\r\n    while(this._elapsed >= this._dt) {\r\n      this._elapsed -= this._dt;\r\n      this._onTick(timeStamp);\r\n      this._updated = true;\r\n    }\r\n\r\n    // only draw when necessary\r\n    if(this._updated) {\r\n      this._updated = false;\r\n      this._render(timeStamp);\r\n    }\r\n\r\n    this._animationFrameRequest = window.requestAnimationFrame(this.handleTick);\r\n  }\r\n}"],"sourceRoot":""}