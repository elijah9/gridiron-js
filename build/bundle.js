!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/build",i(i.s=0)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=i(3),r=i(4),s=i(7),a=2,d=function(e){--a>0||(c(e),y.start())},l=function(e){h.onKeyEvent(e.type,e.keyCode)},c=function(e){p.resize(document.documentElement.clientWidth-32,document.documentElement.clientHeight-32)},u=document.querySelector("canvas"),h=new o.Controller,p=new n.Field2D(u),f=new r.GameSim,y=new s.Engine(1e3/30,(function(){p.updateField(f.field)}),(function(){h.left.active&&f.field.player.moveLeft(),h.right.active&&f.field.player.moveRight(),h.up.active&&f.field.player.moveUp(),h.down.active&&f.field.player.moveDown(),f.update()}));p.canvas.addEventListener("field-loaded",d,{once:!0}),p.canvas.addEventListener("players-loaded",d,{once:!0}),p.loadAssets(),window.addEventListener("resize",c),window.addEventListener("keydown",l),window.addEventListener("keyup",l)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=function(){function e(e){this._resourcesToLoad=2,this.canvas=e,this.canvas.addEventListener("field-loaded",this.initDraw,{once:!0}),this.canvas.addEventListener("players-loaded",this.initDraw,{once:!0})}return e.prototype.loadAssets=function(){paper.setup(this.canvas),this.drawField(),this.drawPlayers()},e.prototype.updateField=function(e){this.updatePlayer(e.player)},e.prototype.resize=function(e,t){void 0!==this._fieldScale&&this._fieldImg.scale(1/this._fieldScale,this._fieldImg.bounds.topLeft),void 0!==this._playerScale&&this._playerImg.scale(1/this._playerScale,new n.Point(0,0));var i=this._baseFieldH/this._baseFieldW;this._fieldScale=t/e>i?e/this._baseFieldW:t/this._baseFieldH,this._fieldImg.scale(this._fieldScale,this._fieldImg.bounds.topLeft);var o=this._playerImg.bounds.width;this._pixelsPerYardX=this._fieldImg.bounds.width/120.9,this._pixelsPerYardY=this._fieldImg.bounds.height/54.1;var r=3*this._pixelsPerYardX;this._playerScale=r/o,this._playerImg.scale(this._playerScale,new n.Point(0,0))},e.prototype.initDraw=function(e){this._resourcesToLoad--,this._resourcesToLoad},e.prototype.drawField=function(){var e=this,t=new Event("field-loaded"),i=new n.Layer;paper.project.addLayer(i),paper.project.importSVG("../../media/field2D.svg",(function(i){e._fieldImg=i,e._baseFieldW=e._fieldImg.bounds.width,e._baseFieldH=e._fieldImg.bounds.height,e.canvas.dispatchEvent(t)}))},e.prototype.drawPlayers=function(){var e=new Event("players-loaded"),t=new n.Layer;paper.project.addLayer(t),this._playerImg=new n.Path.Circle({center:[0,0],radius:3}),t.addChild(this._playerImg),this.canvas.dispatchEvent(e)},e.prototype.updatePlayer=function(e){this._playerImg.fillColor=new n.Color(e.colorMain),this._playerImg.bounds.x=e.x*this._pixelsPerYardX,this._playerImg.bounds.y=e.y*this._pixelsPerYardY},e.prototype.fillPlayerColor=function(e,t){var i=this;t.fillColor=new n.Color(e.colorMain),t.strokeColor=new n.Color(e.colorSec),void 0!==t.children&&t.children.map((function(t){i.fillPlayerColor(e,t)}))},e}();t.Field2D=o},function(e,t){e.exports=paper},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.down=new o,this.left=new o,this.right=new o,this.up=new o}return e.prototype.onKeyEvent=function(e,t){var i="keydown"===e;switch(t){case 37:this.left.handleInput(i);break;case 38:this.up.handleInput(i);break;case 39:this.right.handleInput(i);break;case 40:this.down.handleInput(i)}},e}();t.Controller=n;var o=function(){function e(){this.active=!1,this.down=!1}return e.prototype.handleInput=function(e){this.down!=e&&(this.active=e),this.down=e},e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(5),o=function(){function e(){this.field=new n.Field}return e.prototype.update=function(){this.field.update()},e}();t.GameSim=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=function(){function e(e){void 0===e&&(e=.9),this.player=new n.GamePlayer,this._gridW=120,this._gridH=54,this._friction=e}return e.prototype.update=function(){this.player.update(),this.player.vx*=this._friction,this.player.vy*=this._friction,this.collideObject(this.player)},e.prototype.collideObject=function(e){e.x<0?(e.x=0,e.vx=0):e.x>this._gridW&&(e.x=this._gridW,e.vx=0),e.y<0?(e.y=0,e.vy=0):e.y>this._gridH&&(e.y=this._gridH,e.vy=0)},e}();t.Field=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.colorMain="#ff0000",this.colorSec="rgba(100, 100, 100)",this.x=15,this.y=25,this.vx=0,this.vy=0}return e.prototype.moveLeft=function(){this.vx-=.1},e.prototype.moveRight=function(){this.vx+=.1},e.prototype.moveUp=function(){this.vy-=.1},e.prototype.moveDown=function(){this.vy+=.1},e.prototype.update=function(){this.x+=this.vx,this.y+=this.vy},e}();t.GamePlayer=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){var n=this;this._elapsed=0,this._updated=!1,this.handleTick=function(e){n.tick(e)},this._dt=e,this._onTick=t,this._render=i}return e.prototype.start=function(){this._elapsed=this._dt,this._time=window.performance.now(),this._animationFrameRequest=window.requestAnimationFrame(this.handleTick)},e.prototype.stop=function(){window.cancelAnimationFrame(this._animationFrameRequest)},e.prototype.tick=function(e){for(this._elapsed+=e-this._time,this._time=e,this._elapsed>=3*this._dt&&(console.log("rolling back frames..."),this._elapsed=this._dt);this._elapsed>=this._dt;)this._elapsed-=this._dt,this._onTick(e),this._updated=!0;this._updated&&(this._updated=!1,this._render(e)),this._animationFrameRequest=window.requestAnimationFrame(this.handleTick)},e}();t.Engine=n}]);
//# sourceMappingURL=bundle.js.map